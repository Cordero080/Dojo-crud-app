<!-- views/partials/nav.ejs -->
<nav class="nav">
  <% if (!currentUser) { %>
    <!-- Logged out -->
    <a href="/auth/login">Log in</a>
    <a href="/auth/signup">Sign up</a>
  <% } else { %>
    <!-- Logged in -->
    <a href="/">Home</a>
    <a href="/forms">All Forms</a>
    <a class="btn" href="/forms/new">Create New Form</a>
    <a href="/forms/trash">Trash</a>

    <% if (typeof hideLogout === 'undefined' || !hideLogout) { %>
      <div class="logout-corner">
        <form action="/auth/logout" method="POST" style="display:inline">
          <button type="submit" class="btn">Logout</button>
        </form>
      </div>
    <% } %>
  <% } %>
</nav>

<% /* Show history arrows on all pages except home (server.js sets showBackArrow/backHref) */ %>
<% if (showBackArrow) { %>
  <!-- Back (prefers real history.back if same-origin; else falls back to backHref) -->
  <a
    class="nav-arrow nav-prev"
    href="<%= backHref %>"
    aria-label="Back"
    title="Back"
    onclick="(function(e){
      if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey || e.button !== 0) return;
      var ref = document.referrer, same = false;
      try { same = ref && new URL(ref).origin === location.origin; } catch(_) {}
      if (history.length > 1 && same) { e.preventDefault(); history.back(); }
    })(event)"
  >&lsaquo;</a>

  <!-- Forward (browser forward; no-op if no forward history) -->
  <a
    class="nav-arrow nav-next"
    href="#"
    aria-label="Forward"
    title="Forward"
    onclick="(function(e){
      if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey || e.button !== 0) return;
      e.preventDefault(); history.forward();
    })(event)"
  >&rsaquo;</a>
<% } %>
